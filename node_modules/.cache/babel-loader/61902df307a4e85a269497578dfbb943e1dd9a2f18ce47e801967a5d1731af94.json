{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nconst loadCartFromLocalStorage = () => {\n  try {\n    const serializedCart = localStorage.getItem(\"cart\");\n    if (serializedCart === null) {\n      return [];\n    }\n    return JSON.parse(serializedCart);\n  } catch (error) {\n    console.error(\"Error loading cart from localStorage:\", error);\n    return [];\n  }\n};\nconst saveCartToLocalStorage = cart => {\n  try {\n    const serializedCart = JSON.stringify(cart);\n    localStorage.setItem(\"cart\", serializedCart);\n  } catch (error) {\n    console.error(\"Error saving cart to localStorage:\", error);\n  }\n};\nconst cartSlice = createSlice({\n  name: \"cart\",\n  initialState: {\n    items: loadCartFromLocalStorage()\n  },\n  reducers: {\n    addToCart: (state, action) => {\n      const {\n        product,\n        quantity\n      } = action.payload;\n      const existingItem = state.items.find(item => item.id === (product === null || product === void 0 ? void 0 : product.id));\n      if (existingItem) {\n        existingItem.quantity += quantity;\n      } else {\n        state.items.push({\n          ...product,\n          quantity\n        });\n      }\n      saveCartToLocalStorage(state.items);\n    },\n    removeFromCart: (state, action) => {\n      const productId = action.payload;\n      state.items = state.items.filter(item => item.id !== productId);\n      saveCartToLocalStorage(state.items);\n    },\n    clearCart: state => {\n      state.items = [];\n      saveCartToLocalStorage(state.items);\n    },\n    updateQuantity: (state, action) => {\n      const {\n        id,\n        quantity\n      } = action.payload;\n      const item = state.items.find(item => (item === null || item === void 0 ? void 0 : item.id) === id);\n      if (item) {\n        item.quantity = quantity;\n        saveCartToLocalStorage(state.items);\n      }\n    }\n  }\n});\nexport const {\n  addToCart,\n  removeFromCart,\n  clearCart,\n  updateQuantity\n} = cartSlice.actions;\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","loadCartFromLocalStorage","serializedCart","localStorage","getItem","JSON","parse","error","console","saveCartToLocalStorage","cart","stringify","setItem","cartSlice","name","initialState","items","reducers","addToCart","state","action","product","quantity","payload","existingItem","find","item","id","push","removeFromCart","productId","filter","clearCart","updateQuantity","actions","reducer"],"sources":["C:/Users/Илья/OneDrive/Рабочий стол/front/src/store/cartSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\nconst loadCartFromLocalStorage = () => {\n  try {\n    const serializedCart = localStorage.getItem(\"cart\");\n    if (serializedCart === null) {\n      return [];\n    }\n    return JSON.parse(serializedCart);\n  } catch (error) {\n    console.error(\"Error loading cart from localStorage:\", error);\n    return [];\n  }\n};\n\nconst saveCartToLocalStorage = (cart) => {\n  try {\n    const serializedCart = JSON.stringify(cart);\n    localStorage.setItem(\"cart\", serializedCart);\n  } catch (error) {\n    console.error(\"Error saving cart to localStorage:\", error);\n  }\n};\n\nconst cartSlice = createSlice({\n  name: \"cart\",\n  initialState: {\n    items: loadCartFromLocalStorage(),\n  },\n  reducers: {\n    addToCart: (state, action) => {\n      const { product, quantity } = action.payload;\n      const existingItem = state.items.find((item) => item.id === product?.id);\n\n      if (existingItem) {\n        existingItem.quantity += quantity;\n      } else {\n        state.items.push({ ...product, quantity });\n      }\n\n      saveCartToLocalStorage(state.items);\n    },\n    removeFromCart: (state, action) => {\n      const productId = action.payload;\n      state.items = state.items.filter((item) => item.id !== productId);\n      saveCartToLocalStorage(state.items);\n    },\n    clearCart: (state) => {\n      state.items = [];\n      saveCartToLocalStorage(state.items);\n    },\n    updateQuantity: (state, action) => {\n      const { id, quantity } = action.payload;\n      const item = state.items.find((item) => item?.id === id);\n      if (item) {\n        item.quantity = quantity;\n        saveCartToLocalStorage(state.items);\n      }\n    },\n  },\n});\n\nexport const { addToCart, removeFromCart, clearCart, updateQuantity } =\n  cartSlice.actions;\nexport default cartSlice.reducer;\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAE9C,MAAMC,wBAAwB,GAAGA,CAAA,KAAM;EACrC,IAAI;IACF,MAAMC,cAAc,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IACnD,IAAIF,cAAc,KAAK,IAAI,EAAE;MAC3B,OAAO,EAAE;IACX;IACA,OAAOG,IAAI,CAACC,KAAK,CAACJ,cAAc,CAAC;EACnC,CAAC,CAAC,OAAOK,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,uCAAuC,EAAEA,KAAK,CAAC;IAC7D,OAAO,EAAE;EACX;AACF,CAAC;AAED,MAAME,sBAAsB,GAAIC,IAAI,IAAK;EACvC,IAAI;IACF,MAAMR,cAAc,GAAGG,IAAI,CAACM,SAAS,CAACD,IAAI,CAAC;IAC3CP,YAAY,CAACS,OAAO,CAAC,MAAM,EAAEV,cAAc,CAAC;EAC9C,CAAC,CAAC,OAAOK,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,oCAAoC,EAAEA,KAAK,CAAC;EAC5D;AACF,CAAC;AAED,MAAMM,SAAS,GAAGb,WAAW,CAAC;EAC5Bc,IAAI,EAAE,MAAM;EACZC,YAAY,EAAE;IACZC,KAAK,EAAEf,wBAAwB,CAAC;EAClC,CAAC;EACDgB,QAAQ,EAAE;IACRC,SAAS,EAAEA,CAACC,KAAK,EAAEC,MAAM,KAAK;MAC5B,MAAM;QAAEC,OAAO;QAAEC;MAAS,CAAC,GAAGF,MAAM,CAACG,OAAO;MAC5C,MAAMC,YAAY,GAAGL,KAAK,CAACH,KAAK,CAACS,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACC,EAAE,MAAKN,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEM,EAAE,EAAC;MAExE,IAAIH,YAAY,EAAE;QAChBA,YAAY,CAACF,QAAQ,IAAIA,QAAQ;MACnC,CAAC,MAAM;QACLH,KAAK,CAACH,KAAK,CAACY,IAAI,CAAC;UAAE,GAAGP,OAAO;UAAEC;QAAS,CAAC,CAAC;MAC5C;MAEAb,sBAAsB,CAACU,KAAK,CAACH,KAAK,CAAC;IACrC,CAAC;IACDa,cAAc,EAAEA,CAACV,KAAK,EAAEC,MAAM,KAAK;MACjC,MAAMU,SAAS,GAAGV,MAAM,CAACG,OAAO;MAChCJ,KAAK,CAACH,KAAK,GAAGG,KAAK,CAACH,KAAK,CAACe,MAAM,CAAEL,IAAI,IAAKA,IAAI,CAACC,EAAE,KAAKG,SAAS,CAAC;MACjErB,sBAAsB,CAACU,KAAK,CAACH,KAAK,CAAC;IACrC,CAAC;IACDgB,SAAS,EAAGb,KAAK,IAAK;MACpBA,KAAK,CAACH,KAAK,GAAG,EAAE;MAChBP,sBAAsB,CAACU,KAAK,CAACH,KAAK,CAAC;IACrC,CAAC;IACDiB,cAAc,EAAEA,CAACd,KAAK,EAAEC,MAAM,KAAK;MACjC,MAAM;QAAEO,EAAE;QAAEL;MAAS,CAAC,GAAGF,MAAM,CAACG,OAAO;MACvC,MAAMG,IAAI,GAAGP,KAAK,CAACH,KAAK,CAACS,IAAI,CAAEC,IAAI,IAAK,CAAAA,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEC,EAAE,MAAKA,EAAE,CAAC;MACxD,IAAID,IAAI,EAAE;QACRA,IAAI,CAACJ,QAAQ,GAAGA,QAAQ;QACxBb,sBAAsB,CAACU,KAAK,CAACH,KAAK,CAAC;MACrC;IACF;EACF;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEE,SAAS;EAAEW,cAAc;EAAEG,SAAS;EAAEC;AAAe,CAAC,GACnEpB,SAAS,CAACqB,OAAO;AACnB,eAAerB,SAAS,CAACsB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}